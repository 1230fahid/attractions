<% layout('layouts/boilerplate')%>
    <h1 class="text-center">Edit Attraction</h1>
    <form action="/attractions/<%=attraction._id%>?_method=PUT" method="POST" novalidate class="validated-form"
        enctype="multipart/form-data">
        <div class="form-group">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="name" name="attraction[name]" value="<%=attraction.name%>">
        </div>
        <div class="form-group">
            <label for="region" class="form-label">Region</label>
            <input type="text" class="form-control" id="region" name="attraction[region]"
                value="<%=attraction.region%>">
        </div>
        <div class="form-group">
            <label for="country" class="form-label">Country</label>
            <input type="text" class="form-control" id="country" name="attraction[country]"
                value="<%=attraction.country%>">
        </div>
        <div class="form-group">
            <label for="description" class="form-label">Description</label>
            <br>
            <!--<input type="text" class="form-control" id="description" name="attraction[description]"
                value="">-->
            <textarea name="attraction[description]" id="description" cols="50" rows="3"
                class="form-control"><%=attraction.description%></textarea>
        </div>
        <p class="mb-1">Add Images</p>
        <div class="input-group">
            <div class="custom-file mb-3">
                <!--<label for="images" class="input-group-text">Add Images</label>-->
                <input type="file" class="custom-file-input" name="images" id="images" multiple>
                <label class="custom-file-label" for="images" id="image_label">Choose file(s)...</label>
            </div>
        </div>

        <div class="mb-3">
            <% attraction.images.forEach(function(img, i) { %>
                <img src="<%=img.thumbnail%>" alt="" class="img-thumbnail">
                <!-- This is using our virtual thumbnail function for images, made in our schema. -->
                <div class="form-check-inline">
                    <input type="checkbox" name="deleteImages[]" id="image-<%=i%>" value="<%=img.filename%>">
                </div>
                <label for="image-<%=i%>">Delete?</label>
                <% }) %>
        </div>
        <button class="btn btn-outline-success">Update Attraction</button>
    </form>
    <a href="/attractions/<%= attraction._id %>">Back To Attraction</a>

    <script src="/assets/countInputFiles.js"></script>